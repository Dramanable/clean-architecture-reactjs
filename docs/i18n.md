# Internationalisation (i18n) Setup

Ce projet utilise `react-i18next` pour la gestion des traductions.

## Structure des fichiers de traduction

```
public/locales/
├── fr/
│   └── translation.json
└── en/
    └── translation.json
```

## Langues supportées

- **Français (fr)** - Langue par défaut
- **Anglais (en)**

## Configuration

La configuration i18n se trouve dans `src/i18n/index.ts` :

- **Langue de fallback** : français
- **Détection automatique** : basée sur localStorage > navigateur > HTML
- **Chargement des traductions** : depuis `/public/locales/{langue}/translation.json`

## Utilisation dans les composants

### Hook de base

```tsx
import { useTranslation } from 'react-i18next'

function MonComposant() {
  const { t } = useTranslation()
  
  return <h1>{t('auth.welcome')}</h1>
}
```

### Hook personnalisé avec fonctionnalités avancées

```tsx
import { useI18n } from '@/i18n/hooks'

function MonComposant() {
  const { t, changeLanguage, currentLanguage, formatDate } = useI18n()
  
  return (
    <div>
      <p>{t('common.loading')}</p>
      <button onClick={() => changeLanguage('en')}>English</button>
      <p>{formatDate(new Date())}</p>
    </div>
  )
}
```

### Traduction des rôles utilisateur

```tsx
import { useUserRoleTranslation } from '@/i18n/hooks'

function UserRole({ role }) {
  const { translateRole } = useUserRoleTranslation()
  
  return <span>{translateRole(role)}</span>
}
```

## Interpolation de variables

```tsx
// Fichier de traduction
{
  "errors": {
    "loginFailed": "Erreur de connexion: {{message}}"
  }
}

// Utilisation
const message = t('errors.loginFailed', { message: 'Invalid credentials' })
```

## Extensions VS Code recommandées

- **i18n Ally** : Gestion visuelle des traductions, détection des clés manquantes, prévisualisation inline

## Clés de traduction disponibles

### Authentification (`auth.*`)
- `auth.login`, `auth.logout`, `auth.email`, `auth.password`
- `auth.welcome`, `auth.invalidCredentials`

### Erreurs (`errors.*`)
- `errors.loginFailed`, `errors.logoutFailed`
- `errors.userFetchFailed`, `errors.refreshFailed`
- `errors.unknownError`

### Interface commune (`common.*`)
- `common.loading`, `common.search`, `common.save`
- `common.cancel`, `common.delete`, `common.edit`

### Utilisateurs (`users.*`)
- `users.title`, `users.create`, `users.edit`
- `users.name`, `users.role`, `users.status`

### Rôles (`roles.*`)
- `roles.admin`, `roles.manager`, `roles.user`, `roles.moderator`

## Bonnes pratiques

1. **Nommage des clés** : Utiliser la notation pointée (`auth.login`)
2. **Organisation** : Regrouper par domaine métier
3. **Cohérence** : Maintenir la même structure entre les langues
4. **Fallback** : Toujours avoir une traduction en français (langue par défaut)
5. **Variables** : Utiliser l'interpolation pour les contenus dynamiques

## Ajout d'une nouvelle langue

1. Créer le dossier `public/locales/{code-langue}/`
2. Copier `translation.json` depuis `fr/` et traduire
3. Ajouter la langue dans `src/presentation/components/common/LanguageSelector.tsx`
4. Mettre à jour `supportedLngs` dans `src/i18n/index.ts`

## Outils de développement

L'extension i18n Ally fournit :
- Prévisualisation des traductions dans l'éditeur
- Détection des clés manquantes ou inutilisées
- Interface graphique pour éditer les traductions
- Auto-complétion des clés de traduction
